function WaferText(e){var t=P("h1","<h1>Heading 1</h1>");t.style.fontWeight+="900",t.className+="item";var a=P("h2","<h2>Heading 2</h2>");a.style.fontWeight+="800",a.className+="item";var n=P("h3","<h3>Heading 3</h3>");n.className+="item";var l=P("p","<p>Paragraph</p>");l.className+="item";var r=P("pre","<pre>Preformatted</pre>");r.className+="item";var o=U("button",'<svg width="25" height="25" fill="currentColor" viewBox="0 0 16 16"><path d="M8.21 13c2.106 0 3.412-1.087 3.412-2.823 0-1.306-.984-2.283-2.324-2.386v-.055a2.176 2.176 0 0 0 1.852-2.14c0-1.51-1.162-2.46-3.014-2.46H3.843V13H8.21zM5.908 4.674h1.696c.963 0 1.517.451 1.517 1.244 0 .834-.629 1.32-1.73 1.32H5.908V4.673zm0 6.788V8.598h1.73c1.217 0 1.88.492 1.88 1.415 0 .943-.643 1.449-1.832 1.449H5.907z"/></svg>');o.className+="item",o.setAttribute("data-value","b"),o.setAttribute("type","button");var s=U("button",'<svg width="25" height="25" fill="currentColor" viewBox="0 0 16 16"><path d="M7.991 11.674 9.53 4.455c.123-.595.246-.71 1.347-.807l.11-.52H7.211l-.11.52c1.06.096 1.128.212 1.005.807L6.57 11.674c-.123.595-.246.71-1.346.806l-.11.52h3.774l.11-.52c-1.06-.095-1.129-.211-1.006-.806z"/></svg>');s.className+="item",s.setAttribute("data-value","i"),s.setAttribute("type","button");var d=U("button",'<svg width="25" height="25" fill="currentColor" viewBox="0 0 16 16"><path d="M5.313 3.136h-1.23V9.54c0 2.105 1.47 3.623 3.917 3.623s3.917-1.518 3.917-3.623V3.136h-1.23v6.323c0 1.49-.978 2.57-2.687 2.57-1.709 0-2.687-1.08-2.687-2.57V3.136zM12.5 15h-9v-1h9v1z"/></svg>');d.className="item",d.setAttribute("data-value","u"),d.setAttribute("type","button");var c=U("button",'<svg width="25" height="25" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"/></svg>');c.setAttribute("data-value","left"),c.setAttribute("type","button");var u=U("button",'<svg width="25" height="25" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"/></svg>');u.setAttribute("data-value","center"),u.setAttribute("type","button");var h=U("button",'<svg width="25" height="25" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M6 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-4-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"/></svg>');h.setAttribute("data-value","right"),h.setAttribute("type","button");var v=[c,u,h];for(i=0;i<v.length;i++)v[i].className="item";var m=U("button",'<svg width="25" height="25" fill="currentColor" viewBox="0 0 16 16"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"/><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"/></svg>');m.className+="item",m.setAttribute("type","button");var f=U("input","");f.className="wafer-input",f.setAttribute("placeholder","Http://"),f.value="http://";var p=U("input","");p.className="wafer-input",p.setAttribute("placeholder","Example : my url");var g=U("div","");g.className+="linkToolBar";var b=U("button","insert");b.className="submit-btn",b.setAttribute("type","button"),g.append(U("label","Text displayed :"),p,U("label","Link url :"),f,G(b));var w=U("button",'<svg width="25" height="25" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/></svg>');w.className+="item",w.setAttribute("type","button");var y=U("button",'<svg width="25" height="25" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5z"/><path d="M1.713 11.865v-.474H2c.217 0 .363-.137.363-.317 0-.185-.158-.31-.361-.31-.223 0-.367.152-.373.31h-.59c.016-.467.373-.787.986-.787.588-.002.954.291.957.703a.595.595 0 0 1-.492.594v.033a.615.615 0 0 1 .569.631c.003.533-.502.8-1.051.8-.656 0-1-.37-1.008-.794h.582c.008.178.186.306.422.309.254 0 .424-.145.422-.35-.002-.195-.155-.348-.414-.348h-.3zm-.004-4.699h-.604v-.035c0-.408.295-.844.958-.844.583 0 .96.326.96.756 0 .389-.257.617-.476.848l-.537.572v.03h1.054V9H1.143v-.395l.957-.99c.138-.142.293-.304.293-.508 0-.18-.147-.32-.342-.32a.33.33 0 0 0-.342.338v.041zM2.564 5h-.635V2.924h-.031l-.598.42v-.567l.629-.443h.635V5z"/></svg>');y.className+="item",y.setAttribute("type","button");var N=U("button",'<svg width="25" height="25" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3.854 2.146a.5.5 0 0 1 0 .708l-1.5 1.5a.5.5 0 0 1-.708 0l-.5-.5a.5.5 0 1 1 .708-.708L2 3.293l1.146-1.147a.5.5 0 0 1 .708 0zm0 4a.5.5 0 0 1 0 .708l-1.5 1.5a.5.5 0 0 1-.708 0l-.5-.5a.5.5 0 1 1 .708-.708L2 7.293l1.146-1.147a.5.5 0 0 1 .708 0zm0 4a.5.5 0 0 1 0 .708l-1.5 1.5a.5.5 0 0 1-.708 0l-.5-.5a.5.5 0 0 1 .708-.708l.146.147 1.146-1.147a.5.5 0 0 1 .708 0z"/></svg>');N.className+="item",N.setAttribute("type","button");var z=U("button",'<svg width="25" height="25" fill="currentColor" viewBox="0 0 16 16"><path d="M2 3.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm.646 2.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L4.293 8 2.646 6.354a.5.5 0 0 1 0-.708zM7 6.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 3a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5zm-5 3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"/></svg>');z.className+="item",z.setAttribute("type","button");var A=U("button",'<svg width="25" height="25" fill="currentColor" viewBox="0 0 16 16"><path d="M2 3.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm10.646 2.146a.5.5 0 0 1 .708.708L11.707 8l1.647 1.646a.5.5 0 0 1-.708.708l-2-2a.5.5 0 0 1 0-.708l2-2zM2 6.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 3a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"/></svg>');A.className+="item",A.setAttribute("type","button");var E=U("button",'<svg width="25" height="25" fill="currentColor" viewBox="0 0 20 20"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"></path></svg>');E.className="item",E.setAttribute("type","button");var L=U("button",'<svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16"><path d="M7 2.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0zm4.225 4.053a.5.5 0 0 0-.577.093l-3.71 4.71-2.66-2.772a.5.5 0 0 0-.63.062L.002 13v2a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-4.5l-4.777-3.947z"/></svg>');L.className+="item",L.setAttribute("type","button");var x=U("button",'<svg width="25" height="25" fill="currentColor" viewBox="0 0 16 16"><path d="M0 1a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V1zm4 0v6h8V1H4zm8 8H4v6h8V9zM1 1v2h2V1H1zm2 3H1v2h2V4zM1 7v2h2V7H1zm2 3H1v2h2v-2zm-2 3v2h2v-2H1zM15 1h-2v2h2V1zm-2 3v2h2V4h-2zm2 3h-2v2h2V7zm-2 3v2h2v-2h-2zm2 3h-2v2h2v-2z"/></svg>');x.className+="item",x.setAttribute("type","button");var C=U("input");C.className="wafer-input",C.setAttribute("placeholder","Http://");var M=U("button","insert");M.className="submit-btn",M.setAttribute("type","button");var k=U("div","");k.append(U("label","Enter Video Url :"),C,G(M));var H=U("button",'<svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.146 4.854a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H12.5A2.5 2.5 0 0 1 15 6.5v8a.5.5 0 0 1-1 0v-8A1.5 1.5 0 0 0 12.5 5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4z"/></svg>');H.className+="item",H.setAttribute("type","button");N=U("button",'<svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M14.854 4.854a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 4H3.5A2.5 2.5 0 0 0 1 6.5v8a.5.5 0 0 0 1 0v-8A1.5 1.5 0 0 1 3.5 5h9.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4z"/></svg>');N.className+="item",N.setAttribute("type","button");var B=document.createElement("div");B.className+="toolbar";var T=U("div","");T.className="floatingLayer";var S=document.createElement("div");S.setAttribute("contenteditable",!0),S.className+="Maintextarea",S.style.overflowY="scroll",S.style.padding="1px 5px 1px 5px",S.style.height="360px",S.append(U("p","&#8203")),sDefTxt=S.innerHTML;var V=document.createElement("select");V.append(l,t,a,n,r),V.className+="heading item",waferElement=document.querySelector(e),waferElement.className+="wafer-container";var W={headingSelection:V,heading:{paragraph:l,H1:t,H2:a,H3:n,Pre:r},bold:o,Italic:s,underLine:d,link:m,justifyLeft:c,justifyCenter:u,justifyRight:h,dotList:w,numList:y,textIndentLeft:z,textIndentRight:A,quote:E,image:L,video:x,undo:H,redo:N};B.append(V,o,s,d,m,"|",c,u,h,"|",w,y,"|",z,A,"|",E,L,x,H,N),waferElement.append(B,S);var R,j,D,q,I;function P(e,t){var a=document.createElement("option");return a.value+=e,a.innerHTML+=t,a}function U(e,t){e=document.createElement(e);return t&&(e.innerHTML=t),e}function F(e){T.innerHTML="",T.append(e),waferElement.append(T)}function Y(){T.remove()}function G(e){var t=document.createElement("div"),a=U("button","Cencel");return a.className="cencel-btn",t.append(a,e),t.className="toolBarBottom",a.addEventListener("click",function(){Y(),S.focus()}),t}function J(e){e.style.backgroundColor?e.removeAttribute("style"):(e.style.backgroundColor="#383838",e.style.color="#ffffff")}function K(e){var t=window.getSelection().anchorNode.parentNode.parentNode.parentNode.parentNode,a=window.getSelection().anchorNode.parentNode.parentNode.parentNode,n=window.getSelection().anchorNode.parentNode.parentNode,l=window.getSelection().anchorNode.parentNode;for(i=0;i<e.length;i++)e[i].matches("b")?"bold"==n.style.fontWeight||"bold"==l.style.fontWeight||"bold"==a.style.fontWeight||"bold"==t.style.fontWeight?(e[i].style.backgroundColor="#383838",e[i].style.color="#ffffff"):e[i].removeAttribute("style"):"italic"!=n.style.fontStyle&&"italic"!=l.style.fontStyle&&"italic"!=a.style.fontStyle&&"italic"!=t.style.fontStyle||(s.style.backgroundColor="#383838",s.style.color="#ffffff"),n.matches(e[i].getAttribute("data-value"))||l.matches(e[i].getAttribute("data-value"))||a.matches(e[i].getAttribute("data-value"))||t.matches(e[i].getAttribute("data-value"))?(e[i].style.backgroundColor="#383838",e[i].style.color="#ffffff"):e[i].removeAttribute("style")}function O(e,t){document.execCommand(e,!1,t),S.focus()}return V.addEventListener("change",function(){"h1"==this.value?this.style.fontWeight="900":"h2"==this.value?this.style.fontWeight="800":"h3"==this.value?this.style.fontWeight="700":"p"==this.value&&(this.style.fontWeight="100"),S.focus(),O("formatblock",this.value)}),S.addEventListener("keyup",function(){K([o,s,d])}),S.addEventListener("mouseup",function(){var e,t,a,n;e=window.getSelection().baseNode.parentNode.id,t=window.getSelection().baseNode.parentNode.parentNode.id,a=window.getSelection().baseNode.parentNode.parentNode.parentNode.id,n=window.getSelection().baseNode.parentNode.parentNode.parentNode.parentNode.id,"waferText"!=e&&"waferText"!=t&&"waferText"!=a&&"waferText"!=n||window.getSelection(),K([o,s,d])}),S.addEventListener("mousedown",function(){for(var e=this.getElementsByTagName("span");e.length;){for(var t=e[0].parentNode;e[0].firstChild;)t.insertBefore(e[0].firstChild,e[0]);t.removeChild(e[0])}}),x.addEventListener("click",function(){selectedText=window.getSelection().getRangeAt(0),F(k),M.addEventListener("click",function(){var e,t;5<C.value.length?(alert(C.value),e=U("div"),(t=document.createElement("iframe")).setAttribute("src",C.value),t.aspectRatio="16 / 9",e.append(t),selectedText.insertNode(t)):C.focus()})}),L.addEventListener("click",function(){selectedText=window.getSelection().getRangeAt(0);var n=document.createElement("input");n.setAttribute("accept","image/*"),n.setAttribute("type","file"),n.click(),n.addEventListener("change",function(){var e=document.createElement("img"),t=new FileReader;t.onloadend=function(){e.setAttribute("src",t.result)},t.readAsDataURL(n.files[0]),e.style.width="100%";var a=document.createElement("div");a.style.padding="0px 10% 0px 10%",a.append(e),e.style.border="1px solid #BCBCBC",selectedText.insertNode(a)}),S.focus()}),c.addEventListener("click",function(){O("justifyleft"),J(this),h.removeAttribute("style"),u.removeAttribute("style")}),u.addEventListener("click",function(){O("justifycenter"),J(this),h.removeAttribute("style"),c.removeAttribute("style")}),h.addEventListener("click",function(){O("justifyright"),J(this),c.removeAttribute("style"),u.removeAttribute("style")}),o.addEventListener("click",function(){O("bold"),J(this)}),s.addEventListener("click",function(){O("italic"),J(this)}),d.addEventListener("click",function(){O("underline"),J(this)}),m.addEventListener("click",function(e){var t,a,n;return t=window.getSelection().getRangeAt(0),a=t.extractContents(),(n=document.createElement("span")).style.backgroundColor="#C4C0C0",n.appendChild(a),t.insertNode(n),f.focus(),S.focus(),e.preventDefault(),selectedText=window.getSelection().getRangeAt(0),function(){F(g);var e=selectedText.toString();p.value=e,b.addEventListener("click",function(e){e.preventDefault(),0==p.value.length?p.focus():0==f.value.length?f.focus():function(e,t){var a=selectedText;a.deleteContents();var n=document.createElement("a");n.setAttribute("href",t),n.appendChild(document.createTextNode(e)),a.insertNode(n),S.focus(),Y()}(p.value,f.value)})}(),!1}),H.addEventListener("click",function(){O("undo")}),N.addEventListener("click",function(){O("redo")}),w.addEventListener("click",function(){O("insertunorderedlist")}),y.addEventListener("click",function(){O("insertorderedlist")}),z.addEventListener("click",function(){O("indent")}),A.addEventListener("click",function(){O("outdent")}),E.addEventListener("click",function(){O("formatblock","blockquote")}),O("formatblock",V.value),S.focus(),{newToolBar:function(e){for(B.innerHTML="",i=0;i<e.length;i++)B.append(W[e[i]]),console.log(e[i])},getText:(j=waferElement.parentElement,D=waferElement.parentElement.parentElement,q=waferElement.parentElement.parentElement.parentElement,I=null,j.matches("form")?I=j:D.matches("form")?I=D:q.matches("form")&&(I=q),void(null!==I&&((R=document.createElement("input")).setAttribute("required","true"),R.setAttribute("type","hidden"),R.setAttribute("name","WaferData"),waferElement.append(R),setInterval(function(){R.value=S.innerHTML},200))))}}
